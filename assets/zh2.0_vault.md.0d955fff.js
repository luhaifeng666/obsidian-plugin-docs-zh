import{_ as s,c as a,o as n,a as l}from"./app.81c6d9a5.js";const i=JSON.parse('{"title":"\u5E93","description":"","frontmatter":{"title":"\u5E93"},"headers":[{"level":2,"title":"\u8BFB\u53D6\u6587\u4EF6","slug":"\u8BFB\u53D6\u6587\u4EF6"},{"level":2,"title":"\u5220\u9664\u6587\u4EF6","slug":"\u5220\u9664\u6587\u4EF6"},{"level":2,"title":"\u6587\u4EF6\u8FD8\u662F\u6587\u4EF6\u5939\uFF1F","slug":"\u6587\u4EF6\u8FD8\u662F\u6587\u4EF6\u5939\uFF1F"}],"relativePath":"zh2.0/vault.md","lastUpdated":1665192537000}'),p={name:"zh2.0/vault.md"},o=l(`<h1 id="\u5E93" tabindex="-1">\u5E93 <a class="header-anchor" href="#\u5E93" aria-hidden="true">#</a></h1><p>\u4EE5\u4E0B\u5185\u5BB9\u6458\u81EA\u5B98\u65B9\u7684 <a href="https://help.obsidian.md/How+to/Working+with+multiple+vaults" target="_blank" rel="noreferrer">Working with multiple Vaults</a> \u6587\u6863:</p><blockquote><p>\u5728 Obsidian \u4E2D\u6BCF\u4E2A\u7B14\u8BB0\u96C6\u5408\u90FD\u662F\u4E00\u4E2A\u5E93\u3002\u5E93\u4E2D\u5305\u542B\u4E00\u4E2A\u76EE\u5F55\uFF0C\u4EE5\u53CA\u76EE\u5F55\u4E0B\u7684\u6240\u6709\u5B50\u76EE\u5F55\u3002</p></blockquote><p>\u5F53\u60A8\u7684\u63D2\u4EF6\u53EF\u4EE5\u50CF\u5176\u4ED6\u4EFB\u4F55 Node.js \u5E94\u7528\u4E00\u6837\u8BBF\u95EE\u6587\u4EF6\u7CFB\u7EDF\u65F6\uFF0C<a href="./reference/typescript/classes/Vault.html"><code>Vault</code></a> \u6A21\u5757\u65E8\u5728\u4F7F\u5728\u5E93\u4E2D\u64CD\u4F5C\u6587\u4EF6\u4EE5\u53CA\u76EE\u5F55\u53D8\u5F97\u66F4\u52A0\u7B80\u5355\u3002</p><p>\u4EE5\u4E0B\u793A\u4F8B\u4E2D\u9012\u5F52\u6253\u5370\u4E86\u5E93\u4E2D\u6240\u6709 Markdown \u6587\u4EF6\u7684\u8DEF\u5F84:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> files </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">vault</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getMarkdownFiles</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> (</span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> files</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">++</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">files</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">path</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u5982\u679C\u60A8\u60F3\u5217\u51FA <em>\u6240\u6709</em> \u6587\u4EF6\uFF0C\u800C\u4E14\u4E0D\u4EC5\u4EC5\u53EA\u662F Markdown \u6587\u6863\uFF0C\u53EF\u4EE5\u4F7F\u7528 <a href="./reference/typescript/classes/Vault.html#getfiles"><code>getFiles()</code></a> \u65B9\u6CD5\u6765\u4EE3\u66FF\u3002</p></div><h2 id="\u8BFB\u53D6\u6587\u4EF6" tabindex="-1">\u8BFB\u53D6\u6587\u4EF6 <a class="header-anchor" href="#\u8BFB\u53D6\u6587\u4EF6" aria-hidden="true">#</a></h2><p>\u6709\u4E24\u4E2A\u65B9\u6CD5\u53EF\u4EE5\u7528\u6765\u8BFB\u53D6\u6587\u4EF6\u5185\u5BB9: <a href="./reference/typescript/classes/Vault.html#read"><code>read()</code></a> \u4EE5\u53CA <a href="./reference/typescript/classes/Vault.html#cachedread"><code>cachedRead()</code></a>\u3002</p><ul><li>\u5982\u679C\u60A8\u4EC5\u4EC5\u53EA\u60F3\u5C06\u5185\u5BB9\u5C55\u793A\u7ED9\u7528\u6237, \u53EF\u4EE5\u4F7F\u7528 <code>cachedRead()</code> \u65B9\u6CD5\u4EE5\u907F\u514D\u591A\u6B21\u4ECE\u78C1\u76D8\u4E2D\u8BFB\u53D6\u6587\u4EF6\u3002</li><li>\u5982\u679C\u60A8\u60F3\u8BFB\u53D6\u6587\u4EF6\u5185\u5BB9\uFF0C\u5E76\u5728\u6539\u53D8\u5B83\u4E4B\u540E\u5199\u56DE\u78C1\u76D8\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>read()</code> \u65B9\u6CD5\u4EE5\u907F\u514D\u6587\u4EF6\u53EF\u80FD\u4F1A\u88AB\u4E4B\u524D\u7684\u5185\u5BB9\u6240\u8986\u76D6\u3002</li></ul><details class="details custom-block"><summary>\u533A\u522B</summary><p><code>cachedRead()</code> \u65B9\u6CD5\u4EE5\u53CA <code>read()</code> \u65B9\u6CD5\u4E24\u8005\u4E4B\u95F4\u7684\u552F\u4E00\u533A\u522B\u4F53\u73B0\u5728\u63D2\u4EF6\u5373\u5C06\u8BFB\u53D6\u6587\u4EF6\uFF0C\u800C\u6587\u4EF6\u5728 Obsidian \u5916\u88AB\u4FEE\u6539\u4E86\u7684\u65F6\u5019\u3002\u4E00\u7ECF\u6587\u4EF6\u7CFB\u7EDF\u901A\u77E5 Obsidian \u6587\u4EF6\u5728\u5916\u90E8\u88AB\u4FEE\u6539\uFF0C <code>cachedRead()</code> \u65B9\u6CD5\u8868\u73B0\u7684 <em>\u5B8C\u5168</em> \u5C31\u50CF <code>read()</code> \u65B9\u6CD5\u4E00\u6837\u3002\u540C\u6837\u7684\uFF0C\u5982\u679C\u60A8\u5728 Obsidian \u5185\u5BB9\u4FDD\u5B58\u4E86\u6587\u4EF6\uFF0C\u90A3\u4E48\u8BFB\u53D6\u7F13\u5B58\u4E5F\u4F1A\u88AB\u5237\u65B0\u3002</p></details><p>\u4EE5\u4E0B\u793A\u4F8B\u8BFB\u53D6\u4E86\u5E93\u4E2D\u7684\u6240\u6709 Markdown \u6587\u4EF6\u5185\u5BB9\uFF0C\u5E76\u4E14\u8FD4\u56DE\u4E86\u6587\u6863\u5927\u5C0F\u7684\u5747\u503C:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Notice</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Plugin</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">obsidian</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ExamplePlugin</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Plugin</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">onload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">addRibbonIcon</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Calculate average file length</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileLength</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">averageFileLength</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Notice</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">The average file length is </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">fileLength</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> characters.</span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">averageFileLength</span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">vault</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileContents</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#F07178;">[] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">vault</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getMarkdownFiles</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">vault</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cachedRead</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">file</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">    )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">totalLength</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">fileContents</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">content</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">totalLength</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">content</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">totalLength</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileContents</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="\u5220\u9664\u6587\u4EF6" tabindex="-1">\u5220\u9664\u6587\u4EF6 <a class="header-anchor" href="#\u5220\u9664\u6587\u4EF6" aria-hidden="true">#</a></h2><p>\u6709\u4E24\u4E2A\u65B9\u6CD5\u53EF\u4EE5\u7528\u6765\u5220\u9664\u6587\u4EF6, \u5206\u522B\u662F<a href="./reference/typescript/classes/Vault.html#delete"><code>delete()</code></a>, \u4EE5\u53CA <a href="./reference/typescript/classes/Vault.html#trash"><code>trash()</code></a>\u3002\u4F7F\u7528\u54EA\u4E2A\u65B9\u6CD5\u53D6\u51B3\u4E8E\u60A8\u662F\u5426\u5141\u8BB8\u7528\u6237\u6539\u53D8\u4E3B\u610F(\u627E\u56DE\u6587\u4EF6)\u3002</p><ul><li>\u4F7F\u7528 <code>delete()</code> \u65B9\u6CD5\u4F1A\u5F7B\u5E95\u5220\u9664\u6587\u4EF6\u3002</li><li>\u4F7F\u7528 <code>trash()</code> \u65B9\u6CD5\u4F1A\u5C06\u6587\u4EF6\u79FB\u5165\u56DE\u6536\u7AD9\u3002</li></ul><p>\u5F53\u60A8\u4F7F\u7528 <code>trash()</code> \u65B9\u6CD5\u65F6, \u60A8\u53EF\u4EE5\u8BBE\u7F6E\u5C06\u6587\u4EF6\u79FB\u5165\u7CFB\u7EDF\u7684\u56DE\u6536\u7AD9\uFF0C\u4E5F\u53EF\u4EE5\u8BBE\u7F6E\u5C06\u5220\u9664\u7684\u6587\u4EF6\u79FB\u52A8\u81F3\u7528\u6237\u7684\u5E93\u6839\u76EE\u5F55\u4E0B\u7684 <code>.trash</code> \u672C\u5730\u6587\u4EF6\u5939\u4E2D\u3002</p><h2 id="\u6587\u4EF6\u8FD8\u662F\u6587\u4EF6\u5939\uFF1F" tabindex="-1">\u6587\u4EF6\u8FD8\u662F\u6587\u4EF6\u5939\uFF1F <a class="header-anchor" href="#\u6587\u4EF6\u8FD8\u662F\u6587\u4EF6\u5939\uFF1F" aria-hidden="true">#</a></h2><p>\u4E00\u4E9B\u64CD\u4F5C\u8FD4\u56DE\u6216\u8005\u63A5\u6536\u4E00\u4E2A <a href="./reference/typescript/classes/TAbstractFile.html"><code>TAbstractFile</code></a> \u5BF9\u8C61, \u5B83\u65E2\u53EF\u4EE5\u662F\u4E00\u4E2A\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u662F\u4E00\u4E2A\u6587\u4EF6\u5939\u3002\u5728\u60A8\u4F7F\u7528\u5B83\u4E4B\u524D\u9700\u8981\u786E\u8BA4 <code>TAbstractFile</code> \u7684\u7C7B\u578B\u5230\u5E95\u662F\u4EC0\u4E48\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> folderOrFile </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">vault</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAbstractFileByPath</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">folderOrFile</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (folderOrFile </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TFile</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">It&#39;s a file!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (folderOrFile </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TFolder</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">It&#39;s a folder!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div>`,20),e=[o];function t(c,r,F,y,D,A){return n(),a("div",null,e)}const d=s(p,[["render",t]]);export{i as __pageData,d as default};

import{_ as s,c as a,o as e,a as n}from"./app.6260dde1.js";const m=JSON.parse('{"title":"创建您的第一个插件","description":"","frontmatter":{"title":"创建您的第一个插件"},"headers":[{"level":2,"title":"开发前准备","slug":"开发前准备","link":"#开发前准备","children":[]},{"level":2,"title":"第一步: 下载示例插件","slug":"第一步-下载示例插件","link":"#第一步-下载示例插件","children":[]},{"level":2,"title":"第二步: 构建插件","slug":"第二步-构建插件","link":"#第二步-构建插件","children":[]},{"level":2,"title":"第三步: 启用插件","slug":"第三步-启用插件","link":"#第三步-启用插件","children":[]},{"level":2,"title":"第四步: 修改插件的 manifest 配置","slug":"第四步-修改插件的-manifest-配置","link":"#第四步-修改插件的-manifest-配置","children":[]},{"level":2,"title":"第五步: 修改插件源码","slug":"第五步-修改插件源码","link":"#第五步-修改插件源码","children":[]},{"level":2,"title":"接下来","slug":"接下来","link":"#接下来","children":[]}],"relativePath":"zh2.0/getting-started/create-your-first-plugin.md","lastUpdated":1676943793000}'),l={name:"zh2.0/getting-started/create-your-first-plugin.md"},o=n(`<h1 id="创建您的第一个插件" tabindex="-1">创建您的第一个插件 <a class="header-anchor" href="#创建您的第一个插件" aria-hidden="true">#</a></h1><p>通过这篇指南，您将学会如何开发一个 Obsidian 插件。 如果您更喜欢通过视频的方式来学习, 可以查看由 <a href="https://www.youtube.com/channel/UC9w43btR2UUsfR6ZUf3AlqQ" target="_blank" rel="noreferrer">Antone Heyward</a> 提供的视频 <a href="https://www.youtube.com/watch?v=9lA-jaMNS0k" target="_blank" rel="noreferrer">Create Your Own Obsidian Plugin</a>。</p><div class="danger custom-block"><p class="custom-block-title">开始之前</p><p>🔥 <strong>千万不要在您的主库里开发插件！</strong> 当您开发一个插件的时候, 一个错误可能会对您的库做出一些意外修改。 您也会存在 <strong>库被永久删除</strong> 的风险。</p></div><h2 id="开发前准备" tabindex="-1">开发前准备 <a class="header-anchor" href="#开发前准备" aria-hidden="true">#</a></h2><p>在使用这篇指南之前，您需要做如下准备:</p><ul><li>本地需要安装 <a href="https://git-scm.com/" target="_blank" rel="noreferrer">Git</a>。</li><li>一个 <a href="https://github.com" target="_blank" rel="noreferrer">GitHub</a> 账号。</li><li><a href="https://Node.js.org/en/about/" target="_blank" rel="noreferrer">Node.js</a> 的本地开发环境。</li></ul><h2 id="第一步-下载示例插件" tabindex="-1">第一步: 下载示例插件 <a class="header-anchor" href="#第一步-下载示例插件" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>以下步骤将会引导您创建自己的插件，如果您想要跳过一些手动步骤（诸如拉取代码库，修改插件名称等），可以尝试使用 <a href="https://www.npmjs.com/package/obsidian-plugin-generator" target="_blank" rel="noreferrer">obsidian-plugin-generator</a> 这个插件。</p><p>该插件会自动拉取官方的示例项目，并根据您输入的内容自动替换插件名称等内容。</p></div><p>首先, 您需要下载一个工作示例插件，并基于这个插件完成剩余步骤。</p><ol><li>跳转至 <a href="https://github.com/obsidianmd/obsidian-sample-plugin" target="_blank" rel="noreferrer">Obsidian Sample Plugin</a> 页面。</li><li>点击 <strong>Use this template</strong>。</li><li>在 <strong>Repository name</strong> 选项中, 输入您的插件名称。 Obsidian 的插件名称往往以 <code>obsidian-</code> 开头。 举个 🌰 , <code>obsidian-instant-coffee</code>。</li><li>点击 <strong>Create repository from template</strong>。</li></ol><p>现在您已经基于 Obsidian 的示例插件创建了一个属于自己的仓库。接下来，您需要将源码下载到本地。</p><ol><li>跳转到您刚才创建的代码仓库。</li><li>点击 <strong>Code</strong>, 并复制代码仓库地址。</li><li>打开终端连接至仓库。</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">path/to/vault/.obsidian/plugins</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol><li>将源码下载至插件所在的文件夹。</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/your-username/obsidian-instant-coffee.git</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="第二步-构建插件" tabindex="-1">第二步: 构建插件 <a class="header-anchor" href="#第二步-构建插件" aria-hidden="true">#</a></h2><p>在这一步骤中, 您将构建插件代码。</p><ol><li>跳转到插件所在文件夹。</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">path/to/vault/.obsidian/plugins/obsidian-instant-coffee</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>安装依赖。</li></ol><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-F5pkp" id="tab-cUVRcUI" checked="checked"><label for="tab-cUVRcUI">npm</label><input type="radio" name="group-F5pkp" id="tab-n8wTWnj"><label for="tab-n8wTWnj">yarn</label></div><div class="blocks"><div class="language-bash active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><ol start="3"><li>编译插件代码。 执行下述命令会生成 <code>main.js</code> 文件，该文件中包含插件的编译版本。</li></ol><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-maxFN" id="tab-uldUiDl" checked="checked"><label for="tab-uldUiDl">npm</label><input type="radio" name="group-maxFN" id="tab-y2sl3wA"><label for="tab-y2sl3wA">yarn</label></div><div class="blocks"><div class="language-bash active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dev</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dev</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><h2 id="第三步-启用插件" tabindex="-1">第三步: 启用插件 <a class="header-anchor" href="#第三步-启用插件" aria-hidden="true">#</a></h2><p>要想 Obsidian 加载这个插件, 您需要先去启用它。</p><ol><li>打开 Obsidian 的 <strong>Preferences</strong> 选项。</li><li>在侧边栏菜单中, 点击 <strong>Community plugins</strong>。</li><li>在 <strong>Installed plugins</strong> 栏目下, 通过点击插件后面的切换按钮启用 <strong>Sample Plugin</strong> 这个插件。</li></ol><p>现在您已经将自己开发的自定义插件跑起来啦~ 棒! 💪</p><p>然而, &quot;Sample Plugin&quot; 可能并不是您心仪的插件名称。让我们来改变它。</p><h2 id="第四步-修改插件的-manifest-配置" tabindex="-1">第四步: 修改插件的 manifest 配置 <a class="header-anchor" href="#第四步-修改插件的-manifest-配置" aria-hidden="true">#</a></h2><p>在这个步骤中, 您将通过修改 <em>manifest</em> 来重命名您的插件。 插件清单 <code>manifest.json</code> 文件中包含了插件的名称以及版本等信息。</p><ol><li>在编辑器（比如 <a href="https://code.visualstudio.com/" target="_blank" rel="noreferrer">Visual Studio Code</a>）中打开 <code>obsidian-instant-coffee</code> 目录。</li><li>在编辑器中打开 <code>manifest.json</code> 文件。</li><li>修改 <code>id</code> 属性的值作为插件 id , 比如 <code>obsidian-instant-coffee</code>。</li><li>修改 <code>name</code> 属性的值作为插件名称, 这个名称要尽量友好(见名知意)。比如 <code>Instant coffee</code>。</li><li>如果您愿意的话, 也可以对 <code>description</code>, <code>author</code>, 以及 <code>authorUrl</code> 属性做出修改。</li></ol><p>插件同时也是一个 Nodejs 的包, 您可以在 <code>package.json</code> 中对其进行配置。 眼下您无需对其操心过多。现在, 我们去修改它来匹配 <em>manifest</em> 中的属性。</p><ol><li>在编辑器中打开 <code>package.json</code> 。</li><li>修改 <code>name</code> 属性的值为 <code>manifest.json</code> 中 <code>id</code> 对应的值。</li><li>修改 <code>version</code> 属性的值为 <code>manifest.json</code> 中 <code>version</code> 对应的值。</li><li>修改 <code>description</code> 属性的值为 <code>manifest.json</code> 中 <code>description</code> 对应的值。</li><li>重启 Obsidian 以重新加载您的插件。</li></ol><h2 id="第五步-修改插件源码" tabindex="-1">第五步: 修改插件源码 <a class="header-anchor" href="#第五步-修改插件源码" aria-hidden="true">#</a></h2><p>在这个步骤中, 您需要修改插件源码，并重载插件以便让改动生效。</p><ol><li>在编辑器中打开 <code>main.ts</code> 。</li><li>找到添加 <em>ribbon icon</em> 的那一行代码。</li></ol><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">addRibbonIcon</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dice</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Sample Plugin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Notice</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">This is a notice!</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li>修改提示文案，您想改啥就改啥。</li></ol><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Notice</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello, you!</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="4"><li>重启 Obsidian 以重新加载您的插件。</li><li>点击左侧菜单的图标，会弹出 <code>Hello, you!</code> 的提示信息。并确认当您鼠标移动到图标上时会显示 &quot;Sample Plugin&quot; 提示信息。</li></ol><h2 id="接下来" tabindex="-1">接下来 <a class="header-anchor" href="#接下来" aria-hidden="true">#</a></h2><p>您已经开发了属于您自己的 Obsidian 插件！ 🚀 您可以尝试通过改变更多的代码去看看它做了什么。以此为起点, 您可以通过查阅其他一些指南去发掘插件的更多功能。</p>`,42),i=[o];function t(p,r,c,d,b,u){return e(),a("div",null,i)}const g=s(l,[["render",t]]);export{m as __pageData,g as default};
